function distanceSq(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function apexDistSq(t,e,n){var r;if(0===n)r=t;else if(t>=e+n)r=e;else if(e>=t+n)r=t;else{var i=t+n-e;r=t-i*i/n*.25}return r<0&&(r=0),r}function ShapeIter(t){this._arcs=t,this._i=0,this._n=0,this.x=0,this.y=0}function Bounds(){arguments.length>0&&this.setBounds.apply(this,arguments)}function ArcIter(t,e){this._i=0,this._n=0,this._inc=1,this._xx=t,this._yy=e,this.i=0,this.x=0,this.y=0}function BinArray(t,e){MapShaper.utils.isNumber(t)?t=new ArrayBuffer(t):Env.inNode&&t instanceof Buffer==1&&(t=BinArray.toArrayBuffer(t)),t instanceof ArrayBuffer==0&&error("BinArray constructor takes an integer, ArrayBuffer or Buffer argument"),this._buffer=t,this._bytes=new Uint8Array(t),this._view=new DataView(t),this._idx=0,this._le=!1!==e}function ShpReader(t){function e(){i=100,s=0,o=1}function n(t,e){var n,r,i,o,s,c,p=null;return t+12<=h&&(c=a.readBytes(12,t),i=c.bigEndian().readUint32(),n=2*c.readUint32()+8,r=c.littleEndian().readUint32(),i==e,o=t+n<=h&&n>=12,s=0===r||r==u.type,o&&s&&(c=a.readBytes(n,t),p=new f(c,n))),p}function r(t,e){for(var r,i,o,f=t,c=null;f+12<=h;){if(r=a.readBytes(12,f),i=r.bigEndian().readUint32(),o=r.littleEndian().skipBytes(4).readUint32(),i==e&&(o==u.type||0===o)){c=n(f,e);break}f+=4}return s+=c?f-t:h-t,c}if(this instanceof ShpReader==!1)return new ShpReader(t);var i,o,s,a=MapShaper.utils.isString(t)?new FileBytes(t):new BufferBytes(t),u=function(t){var e={signature:t.bigEndian().readUint32(),byteLength:2*t.skipBytes(20).readUint32(),version:t.littleEndian().readUint32(),type:t.readUint32(),bounds:t.readFloat64Array(4),zbounds:t.readFloat64Array(2),mbounds:t.readFloat64Array(2)};return 9994!=e.signature&&error("Not a valid .shp file"),MapShaper.isSupportedShapefileType(e.type)||error("Unsupported .shp type:",e.type),e.byteLength!=a.size()&&error("File size of .shp doesn't match size in header"),e}(a.readBytes(100,0)),h=a.size(),f=new ShpRecordClass(u.type);e(),this.header=function(){return u},this.forEachShape=function(t){for(var e=this.nextShape();e;)t(e),e=this.nextShape()},this.nextShape=function(){var t=n(i,o);if(!t&&i+12<=h&&(t=r(i+4,o)),t){if(i+=t.byteLength,t.id<o)return message("[shp] Record "+t.id+" appears more than once -- possible file corruption."),this.nextShape();o++}else s>0&&message("[shp] Skipped "+s+" bytes in .shp file -- possible data loss."),a.close(),e();return t}}function ShpRecordClass(t){var e,n=ShpType.hasBounds(t),r=ShpType.isMultiPartType(t),i=ShpType.isZType(t),o=ShpType.isMType(t),s=!n,a=s?0:16;if(0===t)return NullRecord;e=function(e,n){var i=e.position();if(this.id=e.bigEndian().readUint32(),this.type=e.littleEndian().skipBytes(4).readUint32(),0===this.type)return new NullRecord;(n>0!=!0||this.type!=t&&0!==this.type)&&error("Unable to read a shape -- .shp file may be corrupted"),this.byteLength=n,s?(this.pointCount=1,this.partCount=1):(e.skipBytes(32),this.partCount=r?e.readUint32():1,this.pointCount=e.readUint32()),this._data=function(){return e.position(i)}};var u={_xypos:function(){var t=12;return s||(t+=4),n&&(t+=32),r&&(t+=4*this.partCount+4),t},readCoords:function(){if(0===this.pointCount)return null;var t=this.readPartSizes(),e=this._data().skipBytes(this._xypos());return t.map(function(t){return e.readFloat64Array(2*t)})},readXY:function(){return 0===this.pointCount?new Float64Array(0):this._data().skipBytes(this._xypos()).readFloat64Array(2*this.pointCount)},readPoints:function(){for(var t,e=this.readXY(),n=i?this.readZ():null,r=o&&this.hasM()?this.readM():null,s=[],a=0,u=e.length/2;a<u;a++)t=[e[2*a],e[2*a+1]],n&&t.push(n[a]),r&&t.push(r[a]),s.push(t);return s},readPartSizes:function(){var t,e,n,r=[];if(0===this.pointCount);else if(1==this.partCount)r.push(this.pointCount);else{e=0,n=this._data().skipBytes(56);for(var i=0,o=this.partCount;i<o;i++)(t=(i<o-1?n.readUint32():this.pointCount)-e)>0&&(r.push(t),e+=t)}return r}},h={read:function(){var t=2;return i&&t++,this.hasM()&&t++,this._data().skipBytes(12).readFloat64Array(t)},stream:function(t){var e=this._data().skipBytes(12);t.addPoint(e.readFloat64(),e.readFloat64()),t.endPath()}},f={readBounds:function(){return this._data().skipBytes(12).readFloat64Array(4)},stream:function(t){for(var e,n=this.readPartSizes(),r=this.readXY(),i=0,o=0;i<n.length;){for(e=n[i];e-- >0;)t.addPoint(r[o++],r[o++]);t.endPath(),i++}r.length!=o&&error("Counting error")},read:function(){for(var t=[],e=this.readPartSizes(),n=this.readPoints(),r=0,i=e.length-1;r<i;r++)t.push(n.splice(0,e[r]));return t.push(n),t}},c={_mpos:function(){var t=this._xypos()+16*this.pointCount;return i&&(t+=8*this.pointCount+a),t},readMBounds:function(){return this.hasM()?this._data().skipBytes(this._mpos()).readFloat64Array(2):null},readM:function(){return this.hasM()?this._data().skipBytes(this._mpos()+a).readFloat64Array(this.pointCount):null},hasM:function(){var t=this._mpos(),e=t+8*this.pointCount+a;return this.byteLength!=t&&(this.byteLength==e||void error("#hasM() Counting error"))}},p={_zpos:function(){return this._xypos()+16*this.pointCount},readZBounds:function(){return this._data().skipBytes(this._zpos()).readFloat64Array(2)},readZ:function(){return this._data().skipBytes(this._zpos()+a).readFloat64Array(this.pointCount)}};return s?MapShaper.utils.extend(u,h):MapShaper.utils.extend(u,f),i&&MapShaper.utils.extend(u,p),o&&MapShaper.utils.extend(u,c),e.prototype=u,u.constructor=e,e}function BufferBytes(t){var e=new BinArray(t),n=e.size();this.readBytes=function(t,r){return n<r+t&&error("Out-of-range error"),e.position(r),e},this.size=function(){return n},this.close=function(){}}function FileBytes(t){function e(e,u){var h,f=s-u,c=Math.min(f,Math.max(i,e)),p=new Buffer(c);r||(r=o.openSync(t,"r")),h=o.readSync(r,p,0,c,u),h<c&&error("Error reading file"),a=u,n=new BinArray(p)}var n,r,i=16777215,o=require("fs"),s=cli.fileSize(t),a=0;this.readBytes=function(t,r){return s<r+t&&error("Out-of-range error"),(!n||r<a||r+t>a+n.size())&&e(t,r),n.position(r-a),n},this.size=function(){return s},this.close=function(){r&&(o.closeSync(r),r=null,n=null,a=0)}}var Env=function(){var t="undefined"!=typeof module&&!!module.exports,e="undefined"!=typeof window&&!t,n=e&&!(!window.phantom||!window.phantom.exit),r=e&&/MSIE ([0-9]+)/.exec(navigator.appVersion)&&parseInt(RegExp.$1)||NaN;return{iPhone:e&&!!navigator.userAgent.match(/iPhone/i),iPad:e&&!!navigator.userAgent.match(/iPad/i),canvas:e&&!!document.createElement("canvas").getContext,inNode:t,inPhantom:n,inBrowser:e,ieVersion:r,ie:!isNaN(r)}}();!function(){function t(t){var e=1e4,n=new Float64Array(e),r=new Float64Array(e),i=0;this.endPath=function(){t(n,r,i),i=0},this.addPoint=function(t,o){i>=e&&(e=Math.ceil(1.3*e),n=u.extendBuffer(n,e),r=u.extendBuffer(r,e)),n[i]=t,r[i]=o,i++}}function e(e){function r(t){y?t!=y&&stop("[PathImporter] Mixed feature types are not allowed"):y=t}function i(t){if(t>c.length){var e=Math.max(t,Math.ceil(1.5*c.length));c=u.extendBuffer(c,e,x),p=u.extendBuffer(p,e,x)}}function o(t){(l[v]||(l[v]=[])).push(t)}function s(t){m++,d[m]=t,o([m])}function h(t,e,n){var r,o,a,u,h=0;i(x+n);for(var f=0;f<n;f++)r=t[f],o=e[f],g&&(r=g(r),o=g(o)),f>0&&r==a&&o==u?w++:(c[x]=r,p[x]=o,x++,h++),u=o,a=r;"polygon"==y&&h>0&&(t[0]==t[n-1]&&e[0]==e[n-1]||(i(x+1),c[x]=t[0],p[x]=e[0],S++,x++,h++)),s(h)}var f=e.reserved_points>0?e.reserved_points:2e4,c=new Float64Array(f),p=new Float64Array(f),l=[],d=[],y=e.type||null,g=null,m=-1,v=-1,x=0,w=0,S=0;e.precision&&(g=getRoundingFunction(e.precision)),u.extend(this,new t(h)),this.startShape=function(){l[++v]=null},this.importLine=function(t){r("polyline"),this.importPath(t)},this.importPoints=function(t){r("point"),g&&t.forEach(function(t){t[0]=g(t[0]),t[1]=g(t[1])}),t.forEach(o)},this.importRing=function(t,e){var n=geom.getPlanarPathArea2(t);r("polygon"),(!0===e&&n>0||!1===e&&n<0)&&(verbose("Warning: reversing",e?"a CW hole":"a CCW ring"),t.reverse()),this.importPath(t)},this.importPath=function(t){for(var e,n=0,r=t.length;n<r;n++)e=t[n],this.addPoint(e[0],e[1]);this.endPath()},this.done=function(){var t,r={name:""};return"polygon"==y||"polyline"==y?x>0?(x<c.length&&(c=c.subarray(0,x),p=p.subarray(0,x)),t=new n(d,c,p),(e.auto_snap||e.snap_interval)&&a.snapCoords(t,e.snap_interval),a.cleanShapes(l,t,y)):(console.log("No geometries were imported"),y=null):"point"==y||null===y||a.error("Unexpected collection type:",y),y&&(r.geometry_type=y,r.shapes=l),{arcs:t||null,info:{},layers:[r]}}}function n(){function t(t,e,n){var r=t.length;t instanceof Array&&(t=new Uint32Array(t)),e instanceof Array&&(e=new Float64Array(e)),n instanceof Array&&(n=new Float64Array(n)),p=e,l=n,y=t,g=null,w=null,d=new Uint32Array(r);for(var o=0,s=0;s<r;s++)d[s]=o,o+=t[s];return o==p.length&&p.length==l.length||error("ArcCollection#initXYData() Counting error"),i(),x=new ArcIter(p,l),this}function e(t){t?(t.length!=p.length&&error("ArcCollection#initZData() mismatched arrays"),t instanceof Array&&(t=new Float64Array(t)),g=t,w=new FilteredArcIter(p,l,g)):(g=null,w=null)}function i(){var t=o(p,l,y);m=t.bb,v=t.bounds}function o(t,e,n){for(var r,i,o,s=n.length,u=new Float64Array(4*s),h=new Bounds,f=0,c=0;c<s;c++)(r=n[c])>0&&(i=4*c,o=a.calcArcBounds(t,e,f,r),u[i++]=o[0],u[i++]=o[1],u[i++]=o[2],u[i]=o[3],f+=r,h.mergeBounds(o));return{bb:u,bounds:h}}function s(){var t=g,e=S;if(!t||!e)return this.getPointCount();for(var n=0,r=0,i=t.length;r<i;r++)t[r]>=e&&n++;return n}function h(){for(var t,e,n=s(),r=y.length,i=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(n),u=new Int32Array(r),h=0,f=0,c=0;c<r;c++){e=0,t=y[c];for(var d=h+t;h<d;h++)g[h]>=S&&(i[f]=p[h],o[f]=l[h],a[f]=g[h],f++,e++);e<2&&error("Collapsed arc"),u[c]=e}return{xx:i,yy:o,zz:a,nn:u}}function f(n){for(var r,i,o=0,s=0,a=u.copyElements,h=0,f=n.length;h<f;h++)r=n[h],i=y[h],r>-1&&(a(p,d[h],p,o,i),a(l,d[h],l,o,i),g&&a(g,d[h],g,o,i),y[r]=i,o+=i,s++);t(y.subarray(0,s),p.subarray(0,o),l.subarray(0,o)),g&&e(g.subarray(0,o))}function c(t,e){var n=new Float64Array(e),r=0;return t.forEach(function(t){for(var e=0,i=t.length;e<i;r++,e++)n[r]=t[e]}),r!=e&&error("Mismatched thresholds"),n}var p,l,d,y,g,m,v,x,w,S=0;1==arguments.length?function(e){var n=[],r=[];t(e.map(function(t){for(var e=t?t.length:0,i=0;i<e;i++)n.push(t[i][0]),r.push(t[i][1]);return e}),n,r)}(arguments[0]):3==arguments.length?t.apply(this,arguments):error("ArcCollection() Invalid arguments"),this.updateVertexData=function(n,r,i,o){t(n,r,i),e(o||null)},this.getVertexData=function(){return{xx:p,yy:l,zz:g,bb:m,nn:y,ii:d}},this.getCopy=function(){var t=new n(new Int32Array(y),new Float64Array(p),new Float64Array(l));return g&&t.setThresholds(new Float64Array(g)),t},this.getFilteredCopy=function(){if(!g||0===S)return this.getCopy();var t=h(),e=new n(t.nn,t.xx,t.yy);return e.setThresholds(t.zz),e},this.toArray=function(){var t=[];return this.forEach(function(e){for(var n=[];e.hasNext();)n.push([e.x,e.y]);t.push(n)}),t},this.toString=function(){return JSON.stringify(this.toArray())},this.forEachArcSegment=function(t,e){for(var n=t>=0,r=n?t:~t,i=this.getRetainedInterval(),o=y[r],s=n?1:-1,a=n?d[r]:d[r]+o-1,u=a,h=0,f=1;f<o;f++)u+=s,(0===i||g[u]>=i)&&(e(a,u,p,l),a=u,h++);return h},this.forEachSegment=function(t){for(var e=0,n=0,r=this.size();n<r;n++)e+=this.forEachArcSegment(n,t);return e},this.transformPoints=function(t){for(var e,n=p,r=l,o=0,s=n.length;o<s;o++)e=t(n[o],r[o]),n[o]=e[0],r[o]=e[1];i()},this.forEach=function(t){for(var e=0,n=this.size();e<n;e++)t(this.getArcIter(e),e)},this.forEach2=function(t){for(var e=0,n=this.size();e<n;e++)t(d[e],y[e],p,l,g,e)},this.forEach3=function(t){for(var e,n,r,i,o,s=0,a=this.size();s<a;s++)e=d[s],n=e+y[s],r=p.subarray(e,n),i=l.subarray(e,n),g&&(o=g.subarray(e,n)),t(r,i,o,s)},this.filter=function(t){for(var e=new Int32Array(this.size()),n=0,r=0,i=0,o=this.size();i<o;i++)t(this.getArcIter(i),i)?(e[i]=n++,r+=y[i]):e[i]=-1;return n===this.size()?null:(f(e),e)},this.dedupCoords=function(){for(var n,r,i=0,o=0,s=0,u=this.size(),h=g;i<u;)n=y[i],r=a.dedupArcCoords(o,s,n,p,l,h),y[i]=r,o+=n,s+=r,i++;return o>s&&(t(y,p.subarray(0,s),l.subarray(0,s)),h&&e(h.subarray(0,s))),o-s},this.getVertex=function(t,e){var n=this.indexOfVertex(t,e);return{x:p[n],y:l[n]}},this.indexOfVertex=function(t,e){var n=t<0?~t:t,r=y[n];return e<0&&(e=r+e),n!=t&&(e=r-e-1),(e<0||e>=r)&&error("[ArcCollection] out-of-range vertex id"),d[n]+e},this.pointIsEndpoint=function(t){for(var e=d,n=y,r=0,i=e.length;r<i;r++)if(t===e[r]||t===e[r]+n[r]-1)return!0;return!1},this.arcIsClosed=function(t){var e=this.indexOfVertex(t,0),n=this.indexOfVertex(t,-1);return e!=n&&p[e]==p[n]&&l[e]==l[n]},this.arcIsLollipop=function(t){var e,n,r=this.getArcLength(t);return!(r<=2||!this.arcIsClosed(t))&&(e=this.indexOfVertex(t,1),n=this.indexOfVertex(t,-2),p[e]==p[n]&&l[e]==l[n])},this.arcIsDegenerate=function(t){for(var e,n,r=this.getArcIter(t),i=0;r.hasNext();){if(i>0&&(e!=r.x||n!=r.y))return!1;e=r.x,n=r.y,i++}return!0},this.getArcLength=function(t){return y[r(t)]},this.getArcIter=function(t){var e=t>=0,n=e?t:~t,r=g&&S?w:x;return n>=y.length&&error("#getArcId() out-of-range arc id:",t),r.init(d[n],y[n],e,S)},this.getShapeIter=function(t){return new ShapeIter(this).init(t)},this.setThresholds=function(t){var n=this.getPointCount(),r=null;return t&&(t.length==n?r=t:t.length==this.size()?r=c(t,n):error("Invalid threshold data")),e(r),this},this.flatten=function(){if(S>0){var t=h();this.updateVertexData(t.nn,t.xx,t.yy),S=0}else g=null},this.getRetainedInterval=function(){return S},this.setRetainedInterval=function(t){return S=t,this},this.getRetainedPct=function(){return this.getPctByThreshold(S)},this.setRetainedPct=function(t){return t>=1?S=0:(S=this.getThresholdByPct(t),S=a.clampIntervalByPct(S,t)),this},this.getRemovableThresholds=function(t){g||error("[arcs] Missing simplification data.");for(var e,n=1|t,r=new Float64Array(Math.ceil(g.length/n)),i=0,o=0,s=this.getPointCount();i<s;i+=n)(e=g[i])!=1/0&&(r[o++]=e);return r.subarray(0,o)},this.getArcThresholds=function(t){t>=0&&t<this.size()||error("[arcs] Invalid arc id:",t);var e=d[t],n=e+y[t];return g.subarray(e,n)},this.getPctByThreshold=function(t){var e,n,r;return t>0?(e=this.getRemovableThresholds(),n=u.findRankByValue(e,t),r=e.length>0?1-(n-1)/e.length:1):r=1,r},this.getThresholdByPct=function(t){var e,n=this.getRemovableThresholds();return e=0===n.length?0:Math.floor((1-t)*(n.length+2)),e<=0?0:e>n.length?1/0:u.findValueByRank(n,e)},this.arcIntersectsBBox=function(t,e){var n=m,r=4*t;return n[r]<=e[2]&&n[r+2]>=e[0]&&n[r+3]>=e[1]&&n[r+1]<=e[3]},this.arcIsContained=function(t,e){var n=m,r=4*t;return n[r]>=e[0]&&n[r+2]<=e[2]&&n[r+1]>=e[1]&&n[r+3]<=e[3]},this.arcIsSmaller=function(t,e){var n=m,r=4*t;return n[r+2]-n[r]<e&&n[r+3]-n[r+1]<e},this.isPlanar=function(){return!a.probablyDecimalDegreeBounds(this.getBounds())},this.size=function(){return d&&d.length||0},this.getPointCount=function(){return p&&p.length||0},this.getBounds=function(){return v},this.getSimpleShapeBounds=function(t,e){e=e||new Bounds;for(var n=0,r=t.length;n<r;n++)this.mergeArcBounds(t[n],e);return e},this.getSimpleShapeBounds2=function(t,e){var n=e||[],i=m,o=4*r(t[0]);n[0]=i[o],n[1]=i[++o],n[2]=i[++o],n[3]=i[++o];for(var s=1,a=t.length;s<a;s++)o=4*r(t[s]),i[o]<n[0]&&(n[0]=i[o]),i[++o]<n[1]&&(n[1]=i[o]),i[++o]>n[2]&&(n[2]=i[o]),i[++o]>n[3]&&(n[3]=i[o]);return n},this.getMultiShapeBounds=function(t,e){if(e=e||new Bounds,t)for(var n=0,r=t.length;n<r;n++)this.getSimpleShapeBounds(t[n],e);return e},this.mergeArcBounds=function(t,e){t<0&&(t=~t);var n=4*t;e.mergeBounds(m[n],m[n+1],m[n+2],m[n+3])}}function r(t){return t>=0?t:~t}function i(t,e){this.arcs=t,this.shapes=e}function o(t,e,n,r,i){return index={},cands=[],bbox=[],r.forEach(function(r,o){for(var s,a=0,u=r&&r.length;a<u;a++)i.getSimpleShapeBounds2(r[a],bbox),t+n<bbox[0]||t-n>bbox[2]||e+n<bbox[1]||e-n>bbox[3]||(s=index[o],s||(s=index[o]={shape:[],id:o},cands.push(s)),s.shape.push(r[a]))}),cands}function s(t,e,n,r,i){for(var o,s,a=[],u=0;u<r.length;u++)o=r[u],s=geom.getPointToShapeDistance(t,e,o.shape,i),s<n?(a=[o.id],n=s):s==n&&a.push(o.id);return a}var a={};"undefined"!=typeof window&&(window.MapShaper=a);var u={getUniqueName:function(t){var e=h.__uniqcount||0;return h.__uniqcount=e+1,(t||"__id_")+e},isFunction:function(t){return"function"==typeof t},isObject:function(t){return t===Object(t)},clamp:function(t,e,n){return t<e?e:t>n?n:t},interpolate:function(t,e,n){return t*(1-n)+e*n},isArray:function(t){return Array.isArray(t)},isNumber:function(t){return null!=t&&t.constructor==Number},isInteger:function(t){return h.isNumber(t)&&(0|t)===t},isString:function(t){return null!=t&&t.toString===String.prototype.toString},isBoolean:function(t){return!0===t||!1===t},toArray:function(t){var e;h.isArrayLike(t)||error("Utils.toArray() requires an array-like object");try{e=Array.prototype.slice.call(t,0)}catch(i){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}return e},isArrayLike:function(t){return!!t&&(!!h.isArray(t)||!h.isString(t)&&(0===t.length||t.length>0))},addslashes:function(t){return(t+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},regexEscape:function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},defaults:function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e]||{};for(var i in r)i in t==!1&&r.hasOwnProperty(i)&&(t[i]=r[i])}return t},extend:function(t){var e,n,r,i=t||{},o=arguments.length;for(n=1;n<o;n++){r=arguments[n]||{};for(e in r)r.hasOwnProperty(e)&&(i[e]=r[e])}return i},inherit:function(t,e){var n=function(){this.__super__==n&&(this.__super__=e.prototype.__super__,e.apply(this,arguments),delete this.__super__)};n.prototype=e.prototype||e,t.prototype=h.extend(new n,t.prototype),t.prototype.constructor=t,t.prototype.__super__=n},subclass:function(t){var e=function(){this.__super__.apply(this,h.toArray(arguments))};h.inherit(e,t);for(var n=1;n<arguments.length;n++)h.extend(e.prototype,arguments[n]);return e}},h=u;a.utils=u,u.getFileExtension=function(t){return u.parseLocalPath(t).extension},u.getPathSep=function(t){return-1==t.indexOf("/")&&-1!=t.indexOf("\\")?"\\":"/"},u.pluck=function(t,e){return t.map(function(t){return t[e]})},u.contains=function(t,e){return u.isString(t)?-1!=t.indexOf(e):u.isArrayLike(t)?-1!=u.indexOf(t,e):void error("Expected Array or String argument")},u.copyElements=function(t,e,n,r,i,o){t===n&&r>e&&error("copy error");var s=1,a=0;o&&(s=-1,a=i-1);for(var u=0;u<i;u++,a+=s)n[u+r]=t[e+a]},u.indexOf=function(t,e,n){n&&error("utils.indexOf() No longer supports property argument");for(var r=!(e===e),i=0,o=t.length||0;i<o;i++){if(t[i]===e)return i;if(r&&t[i]!==t[i])return i}return-1},u.isFiniteNumber=function(t){return 0===t||!!t&&t.constructor==Number&&t!==1/0&&t!==-1/0},u.extendBuffer=function(t,e,n){var r=Math.max(t.length,e),i=n||t.length,o=new t.constructor(r);return u.copyElements(t,0,o,0,i),o},u.parseLocalPath=function(t){var e,n={},r=u.getPathSep(t),i=t.split(r);return 1==i.length?(n.filename=i[0],n.directory=""):(n.filename=i.pop(),n.directory=i.join(r)),e=n.filename.lastIndexOf("."),e>-1?(n.extension=n.filename.substr(e+1),n.basename=n.filename.substr(0,e),n.pathbase=t.substr(0,t.lastIndexOf("."))):(n.extension="",n.basename=n.filename,n.pathbase=t),n},a.stop=function(t){throw alert(t),new Error(t)},a.error=function(){var t=u.toArray(arguments).join(" ");throw new Error(t)},a.isBinaryFile=function(t){var e=u.getFileExtension(t).toLowerCase();return"shp"==e||"dbf"==e||"zip"==e},a.guessInputType=function(t,e){return a.guessInputFileType(t)||a.guessInputContentType(e)},a.guessInputFileType=function(t){var e=u.getFileExtension(t||"").toLowerCase(),n=null;return"dbf"==e||"shp"==e||"prj"==e?n=e:/json$/.test(e)&&(n="json"),n},a.getUniqFieldNames=function(t,e){var n={};return t.map(function(t){var r,i=0;do{r=a.adjustFieldName(t,e,i),i++}while(r in n);return n[r]=!0,r})},a.standardizeEncodingName=function(t){return t.toLowerCase().replace(/[_-]/g,"")},a.adjustFieldName=function(t,e,n){var r,i;return e=e||256,n?(i=String(n),1==i.length&&(i="_"+i),r=t.substr(0,e-i.length)+i):r=t.substr(0,e),r},a.detectEncoding=function(t){var e=null;return a.looksLikeUtf8(t)?e="utf8":a.looksLikeWin1252(t)&&(e="win1252"),e},a.looksLikeWin1252=function(t){var e="abcdefghijklmnopqrstuvwxyz0123456789.'\"?+-\n,:;/|_$% ",n=a.decodeSamples("win1252",t),r=a.getCharScore(n,e);return a.getCharScore(n,"ßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýÿ°–"+e)>.97&&r>.7},a.decodeSamples=function(t,e){return e.map(function(e){return a.decodeString(e,t).trim()}).join("\n")},a.decodeString=function(t,e){var n=require("iconv-lite"),r=n.decode(t,e);return 65279==r.charCodeAt(0)&&(r=r.substr(1)),r},a.looksLikeUtf8=function(t){return-1==a.decodeSamples("utf8",t).indexOf("�")},a.getWorldBounds=function(t){return t=u.isFiniteNumber(t)?t:1e-10,[-180+t,-90+t,180-t,90-t]},a.probablyDecimalDegreeBounds=function(t){var e=a.getWorldBounds(-1),n=t instanceof Bounds?t.toArray():t;return containsBounds(e,n)},a.forEachPathSegment=function(t,e,n){a.forEachArcId(t,function(t){e.forEachArcSegment(t,n)})},a.forEachArcId=function(t,e){for(var n,r=0;r<t.length;r++)if((n=t[r])instanceof Array)a.forEachArcId(n,e);else if(u.isInteger(n)){var i=e(n);void 0!==i&&(t[r]=i)}else n&&error("Non-integer arc id in:",t)},a.guessInputContentType=function(t){var e=null;return u.isString(t)?e=a.stringLooksLikeJSON(t)?"json":"text":(u.isObject(t)&&t.type||u.isArray(t))&&(e="json"),e},a.stringLooksLikeJSON=function(t){return/^\s*[{[]/.test(String(t))},a.importFileContent=function(t,e,n){var r=a.guessInputType(e,t),i={};return i[r]={filename:e,content:t},a.importContent(i,n)},a.importContent=function(t,e){var n,r,i;return e=e||{},t.json||t.shp&&(r="shapefile",i=t.shp,n=a.importShapefile(t,e)),n||stop("Missing an expected input type"),i.filename&&(n.info.input_files=[i.filename]),n.info.input_format=r,n},a.importShapefile=function(t,e){var n=t.shp.content||t.shp.filename,r=a.importShp(n,e),i=r.layers[0];return t.dbf&&(i.data=new a.ShapefileTable(content,"utf8"),i.shapes&&i.data.size()!=i.shapes.length&&message("[shp] Mismatched .dbf and .shp record count -- possible data loss.")),t.prj&&(r.info.input_prj=t.prj.content),r},a.isSupportedShapefileType=function(t){return u.contains([0,1,3,5,8,11,13,15,18,21,23,25,28],t)},a.forEachPoint=function(t,e){t.forEach(function(t,n){for(var r=t?t.length:0,i=0;i<r;i++)e(t[i],n)})},a.calcArcBounds=function(t,e,n,r){var i,o,s,a,u,h,f=0|n,c=isNaN(r)?t.length-f:r+f;for(c>0&&(s=u=t[f],a=h=e[f]),f++;f<c;f++)i=t[f],o=e[f],i<s&&(s=i),i>u&&(u=i),o<a&&(a=o),o>h&&(h=o);return[s,a,u,h]},a.cleanShapes=function(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=a.cleanShape(t[r],e,n)},a.cleanShape=function(t,e,n){return a.editPaths(t,function(t){var r=a.cleanPath(t,e);return"polygon"==n&&r&&(a.removeSpikesInPath(r),0===geom.getPlanarPathArea(r,e)&&(r=null)),r})},a.cleanPath=function(t,e){for(var n=0,r=0,i=t.length;r<i;r++)e.arcIsDegenerate(t[r])&&(n++,t[r]=null);return n>0?t.filter(function(t){return null!==t}):t},a.removeSpikesInPath=function(t){var e=t.length;if(e>=2){if(t[0]==~t[e-1])t.pop(),t.shift();else for(var n=1;n<e;n++)if(t[n-1]==~t[n]){t.splice(n-1,2);break}t.length<e&&a.removeSpikesInPath(t)}},a.editPaths=function(t,e){if(!t)return null;u.isArray(t)||error("[editPaths()] Expected an array, found:",arr);for(var n,r=0,i=t.length,o=0;o<i;o++)n=e(t[o],o,t),null===n?(r++,t[o]=null):u.isArray(n)&&(t[o]=n);return r==i?null:r>0?t.filter(function(t){return!!t}):t},a.getShapefileType=function(t){return{polygon:ShpType.POLYGON,polyline:ShpType.POLYLINE,point:ShpType.MULTIPOINT}[t]||ShpType.NULL},a.translateShapefileType=function(t){return u.contains([ShpType.POLYGON,ShpType.POLYGONM,ShpType.POLYGONZ],t)?"polygon":u.contains([ShpType.POLYLINE,ShpType.POLYLINEM,ShpType.POLYLINEZ],t)?"polyline":u.contains([ShpType.POINT,ShpType.POINTM,ShpType.POINTZ,ShpType.MULTIPOINT,ShpType.MULTIPOINTM,ShpType.MULTIPOINTZ],t)?"point":null},a.importShp=function(t,n){var r=new ShpReader(t),i=r.type(),o=a.translateShapefileType(i),s=u.defaults({type:o,reserved_points:Math.round(r.header().byteLength/16)},n),h=new e(s);return a.isSupportedShapefileType(i)||stop("Unsupported Shapefile type:",i),ShpType.isZType(i)?message("Warning: Shapefile Z data will be lost."):ShpType.isMType(i)&&message("Warning: Shapefile M data will be lost."),r.forEachShape(function(t){h.startShape(),t.isNull||("point"==o?h.importPoints(t.readPoints()):t.stream(h))}),h.done()},n.prototype.inspect=function(){var t=this.getPointCount();return t<50?JSON.stringify(this.toArray()):"[ArcCollection ("+this.size()+")]"},a.hitShape=function(t,e){return new i(t,e)},i.prototype.polygonHit=function(t,e){for(var n,r=.046308074895251315,i=o(t,e,r,this.shapes,this.arcs),a=[],u=0;u<i.length;u++)n=i[u],geom.testPointInPolygon(t,e,n.shape,this.arcs)&&a.push(n.id);return i.length>0&&0===a.length&&(a=s(t,e,r,i,this.arcs)),a},i.prototype.pointHit=function(t,e){var n=.0045164048721638,r=n*n,i=[];return a.forEachPoint(this.shapes,function(n,o){var s=geom.distanceSq(t,e,n[0],n[1]);s<r?(i=[o],r=s):s==r&&i.push(o)}),i},i.prototype.polylineHit=function(t,e){var n=.02390559532122913;return s(t,e,n,o(t,e,n,this.shapes,this.arcs),this.arcs)}}();var geom={distanceSq:distanceSq};geom.getPointToShapeDistance=function(t,e,n,r){return(n||[]).reduce(function(n,i){var o=geom.getPointToPathDistance(t,e,i,r);return Math.min(n,o)},1/0)},geom.getPointToPathDistance=function(t,e,n,r){var i=r.getShapeIter(n);if(!i.hasNext())return 1/0;for(var o,s,a,u,h=i.x,f=i.y,c=distanceSq(t,e,h,f),p=c;i.hasNext();)a=i.x,u=i.y,o=distanceSq(t,e,a,u),s=distanceSq(h,f,a,u),p=Math.min(p,apexDistSq(c,o,s)),h=a,f=u,c=o;return Math.sqrt(p)},geom.getPlanarPathArea=function(t,e){var n,r,i,o,s,a,u=e.getShapeIter(t),h=0;if(u.hasNext())for(n=0,r=0,s=-u.x,a=-u.y;u.hasNext();)i=n,o=r,n=u.x+s,r=u.y+a,h+=n*o-i*r;return h/2},geom.testPointInPolygon=function(t,e,n,r){var i=!1,o=!1;return n&&n.forEach(function(n){var s=geom.testPointInRing(t,e,n,r);1==s?i=!i:-1==s&&(o=!0)}),o||i},geom.testPointInRing=function(t,e,n,r){var i=!1,o=!1;return MapShaper.forEachPathSegment(n,r,function(n,r,s,a){var u=geom.testRayIntersection(t,e,s[n],a[n],s[r],a[r]);1==u?i=!i:isNaN(u)&&(o=!0)}),o?-1:i?1:0},geom.testRayIntersection=function(t,e,n,r,i,o){var s=geom.getRayIntersection(t,e,n,r,i,o);return s!=s?NaN:s==-1/0?0:1},geom.getRayIntersection=function(t,e,n,r,i,o){var s,a=-1/0;return t<n&&t<i||t>n&&t>i||e>r&&e>o||(t===n||t===i?t===n&&t===i?e!=r&&e!=o&&e>r==e>o||(a=NaN):t===n?e===r?a=NaN:i<n&&e<r&&(a=r):e===o?a=NaN:n<i&&e<o&&(a=o):(s=geom.getYIntercept(t,n,r,i,o),s>e?a=s:s==e&&(a=NaN))),a},geom.getYIntercept=function(t,e,n,r,i){return n+(t-e)*(i-n)/(r-e)},geom.getXIntercept=function(t,e,n,r,i){return e+(t-n)*(r-e)/(i-n)},ShapeIter.prototype.hasNext=function(){var t=this._arc;return this._i<this._n!=!1&&(t.hasNext()?(this.x=t.x,this.y=t.y,!0):(this.nextArc(),this.hasNext()))},ShapeIter.prototype.init=function(t){return this._ids=t,this._n=t.length,this.reset(),this},ShapeIter.prototype.nextArc=function(){var t=this._i+1;t<this._n&&(this._arc=this._arcs.getArcIter(this._ids[t]),t>0&&this._arc.hasNext()),this._i=t},ShapeIter.prototype.reset=function(){this._i=-1,this.nextArc()},Bounds.prototype.toString=function(){return JSON.stringify({xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax})},Bounds.prototype.toArray=function(){return this.hasBounds()?[this.xmin,this.ymin,this.xmax,this.ymax]:[]},Bounds.prototype.hasBounds=function(){return this.xmin<=this.xmax&&this.ymin<=this.ymax},Bounds.prototype.sameBounds=Bounds.prototype.equals=function(t){return t&&this.xmin===t.xmin&&this.xmax===t.xmax&&this.ymin===t.ymin&&this.ymax===t.ymax},Bounds.prototype.width=function(){return this.xmax-this.xmin||0},Bounds.prototype.height=function(){return this.ymax-this.ymin||0},Bounds.prototype.area=function(){return this.width()*this.height()||0},Bounds.prototype.empty=function(){return this.xmin=this.ymin=this.xmax=this.ymax=void 0,this},Bounds.prototype.setBounds=function(t,e,n,r){return 1==arguments.length&&(Utils.isArrayLike(t)?(e=t[1],n=t[2],r=t[3],t=t[0]):(e=t.ymin,n=t.xmax,r=t.ymax,t=t.xmin)),this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=r,(t>n||e>r)&&this.update(),this},Bounds.prototype.centerX=function(){return.5*(this.xmin+this.xmax)},Bounds.prototype.centerY=function(){return.5*(this.ymax+this.ymin)},Bounds.prototype.containsPoint=function(t,e){return t>=this.xmin&&t<=this.xmax&&e<=this.ymax&&e>=this.ymin},Bounds.prototype.containsBufferedPoint=Bounds.prototype.containsCircle=function(t,e,n){return t+n>this.xmin&&t-n<this.xmax&&e-n<this.ymax&&e+n>this.ymin},Bounds.prototype.intersects=function(t){return t.xmin<=this.xmax&&t.xmax>=this.xmin&&t.ymax>=this.ymin&&t.ymin<=this.ymax},Bounds.prototype.contains=function(t){return t.xmin>=this.xmin&&t.ymax<=this.ymax&&t.xmax<=this.xmax&&t.ymin>=this.ymin},Bounds.prototype.shift=function(t,e){this.setBounds(this.xmin+t,this.ymin+e,this.xmax+t,this.ymax+e)},Bounds.prototype.padBounds=function(t,e,n,r){this.xmin-=t,this.ymin-=e,this.xmax+=n,this.ymax+=r},Bounds.prototype.scale=function(t,e){var n=.5*(this.xmax-this.xmin),r=.5*(this.ymax-this.ymin),i=t-1,o=void 0===e?i:e-1;this.xmin-=n*i,this.ymin-=r*o,this.xmax+=n*i,this.ymax+=r*o},Bounds.prototype.cloneBounds=Bounds.prototype.clone=function(){return new Bounds(this.xmin,this.ymin,this.xmax,this.ymax)},Bounds.prototype.clearBounds=function(){this.setBounds(new Bounds)},Bounds.prototype.mergePoint=function(t,e){void 0===this.xmin?this.setBounds(t,e,t,e):(t<this.xmin?this.xmin=t:t>this.xmax&&(this.xmax=t),e<this.ymin?this.ymin=e:e>this.ymax&&(this.ymax=e))},Bounds.prototype.fillOut=function(t,e,n){arguments.length<3&&(e=.5,n=.5);var r,i=this.width(),o=this.height(),s=i/o;return isNaN(t)||t<=0||(s<t?(r=o*t-i,this.xmin-=(1-e)*r,this.xmax+=e*r):(r=i/t-o,this.ymin-=(1-n)*r,this.ymax+=n*r)),this},Bounds.prototype.update=function(){var t;this.xmin>this.xmax&&(t=this.xmin,this.xmin=this.xmax,this.xmax=t),this.ymin>this.ymax&&(t=this.ymin,this.ymin=this.ymax,this.ymax=t)},Bounds.prototype.transform=function(t){return this.xmin=this.xmin*t.mx+t.bx,this.xmax=this.xmax*t.mx+t.bx,this.ymin=this.ymin*t.my+t.by,this.ymax=this.ymax*t.my+t.by,this.update(),this},Bounds.prototype.getTransform=function(t,e){var n=new Transform;return n.mx=t.width()/this.width(),n.bx=t.xmin-n.mx*this.xmin,e?(n.my=-t.height()/this.height(),n.by=t.ymax-n.my*this.ymin):(n.my=t.height()/this.height(),n.by=t.ymin-n.my*this.ymin),n},Bounds.prototype.mergeCircle=function(t,e,n){n<0&&(n=-n),this.mergeBounds([t-n,e-n,t+n,e+n])},Bounds.prototype.mergeBounds=function(t){var e,n,r,i;return t instanceof Bounds?(e=t.xmin,n=t.ymin,r=t.xmax,i=t.ymax):4==arguments.length?(e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3]):4==t.length?(e=t[0],n=t[1],r=t[2],i=t[3]):error("Bounds#mergeBounds() invalid argument:",t),void 0===this.xmin?this.setBounds(e,n,r,i):(e<this.xmin&&(this.xmin=e),n<this.ymin&&(this.ymin=n),r>this.xmax&&(this.xmax=r),i>this.ymax&&(this.ymax=i)),this},ArcIter.prototype.init=function(t,e,n){return n?(this._i=t,this._inc=1):(this._i=t+e-1,this._inc=-1),this._n=e,this},ArcIter.prototype.hasNext=function(){var t=this._i;return this._n>0&&(this._i=t+this._inc,this.x=this._xx[t],this.y=this._yy[t],this.i=t,this._n--,!0)},BinArray.bufferToUintArray=function(t,e){return 4==e?new Uint32Array(t):2==e?new Uint16Array(t):1==e?new Uint8Array(t):void error("BinArray.bufferToUintArray() invalid word length:",e)},BinArray.uintSize=function(t){return 1&t||2&t||4},BinArray.bufferCopy=function(t,e,n,r,i){r=r||0,i=i||n.byteLength-r,t.byteLength-e<i&&error("Buffer overflow; tried to write:",i);for(var o=Math.min(BinArray.uintSize(i),BinArray.uintSize(r),BinArray.uintSize(t.byteLength),BinArray.uintSize(e),BinArray.uintSize(n.byteLength)),s=BinArray.bufferToUintArray(n,o),a=BinArray.bufferToUintArray(t,o),u=i/o,h=r/o,f=e/o;u--;)a[f++]=s[h++];return i},BinArray.toArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t[i];return n},
BinArray.bufferSize=function(t){return t instanceof ArrayBuffer?t.byteLength:0|t.length},BinArray.prototype={size:function(){return this._buffer.byteLength},littleEndian:function(){return this._le=!0,this},bigEndian:function(){return this._le=!1,this},buffer:function(){return this._buffer},bytesLeft:function(){return this._buffer.byteLength-this._idx},skipBytes:function(t){return this._idx+=t+0,this},readUint8:function(){return this._bytes[this._idx++]},writeUint8:function(t){return this._bytes[this._idx++]=t,this},readInt8:function(){return this._view.getInt8(this._idx++)},writeInt8:function(t){return this._view.setInt8(this._idx++,t),this},readUint16:function(){var t=this._view.getUint16(this._idx,this._le);return this._idx+=2,t},writeUint16:function(t){return this._view.setUint16(this._idx,t,this._le),this._idx+=2,this},readUint32:function(){var t=this._view.getUint32(this._idx,this._le);return this._idx+=4,t},writeUint32:function(t){return this._view.setUint32(this._idx,t,this._le),this._idx+=4,this},readInt32:function(){var t=this._view.getInt32(this._idx,this._le);return this._idx+=4,t},writeInt32:function(t){return this._view.setInt32(this._idx,t,this._le),this._idx+=4,this},readFloat64:function(){var t=this._view.getFloat64(this._idx,this._le);return this._idx+=8,t},writeFloat64:function(t){return this._view.setFloat64(this._idx,t,this._le),this._idx+=8,this},readFloat64Array:function(t){var e,n=8*t,r=this._idx,i=this._buffer;if(r%8==0)e=new Float64Array(i,r,t);else if(i.slice)e=new Float64Array(i.slice(r,r+n));else{var o=new ArrayBuffer(n);BinArray.bufferCopy(o,0,i,r,n),e=new Float64Array(o)}return this._idx+=n,e},readUint32Array:function(t){for(var e=[],n=0;n<t;n++)e.push(this.readUint32());return e},peek:function(t){return this._view.getUint8(t>=0?t:this._idx)},position:function(t){return null!=t?(this._idx=t,this):this._idx},readCString:function(t,e){for(var n="",r=t>=0?t:this.bytesLeft();r>0;){var i=this.readUint8();if(r--,0==i)break;if(i>127&&e){n=null;break}n+=String.fromCharCode(i)}return t>0&&r>0&&this.skipBytes(r),n},writeString:function(t,e){var n,r=0,i=t.length;e&&(i=Math.min(i,e));for(var o=0;o<i;o++)n=t.charCodeAt(o),n>127&&(trace("#writeCString() Unicode value beyond ascii range"),n="?".charCodeAt(0)),this.writeUint8(n),r++;return r},writeCString:function(t,e){var n=e?e-1:null,r=this.writeString(t,n);if(this.writeUint8(0),r++,e)for(;r<e;)this.writeUint8(0),r++;return this},writeBuffer:function(t,e,n){return this._idx+=BinArray.bufferCopy(this._buffer,this._idx,t,n,e),this}},ShpReader.prototype.type=function(){return this.header().type},ShpReader.prototype.getCounts=function(){var t={nullCount:0,partCount:0,shapeCount:0,pointCount:0};return this.forEachShape(function(e){e.isNull&&t.nullCount++,t.pointCount+=e.pointCount,t.partCount+=e.partCount,t.shapeCount++}),t};var ShpType={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULIPOINTM:28,MULTIPATCH:31};ShpType.isPolygonType=function(t){return 5==t||15==t||25==t},ShpType.isPolylineType=function(t){return 3==t||13==t||23==t},ShpType.isMultiPartType=function(t){return ShpType.isPolygonType(t)||ShpType.isPolylineType(t)},ShpType.isMultiPointType=function(t){return 8==t||18==t||28==t},ShpType.isZType=function(t){return MapShaper.utils.contains([11,13,15,18],t)},ShpType.isMType=function(t){return ShpType.isZType(t)||MapShaper.utils.contains([21,23,25,28],t)},ShpType.hasBounds=function(t){return ShpType.isMultiPartType(t)||ShpType.isMultiPointType(t)},function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){(function(t){function e(t,e){function i(){return o||(o=new r(s.readRows()),s=null,t=null),o}var o,s=new n(t,e),a=!1;this.exportAsDbf=function(t){return s&&!a?s.getBuffer():i().exportAsDbf(t)},this.getRecordAt=function(t){return s?s.readRow(t):o.getRecordAt(t)},this.deleteField=function(t){o?o.deleteField(t):(a=!0,s.deleteField(t))},this.getRecords=function(){return i().getRecords()},this.getFields=function(){return s?s.getFields():o.getFields()},this.size=function(){return s?s.size():o.size()}}function n(e,n){function r(t){return{name:t.readCString(11),type:String.fromCharCode(t.readUint8()),address:t.readUint32(),size:t.readUint8(),decimals:t.readUint8(),id:t.skipBytes(2).readUint8(),position:t.skipBytes(2).readUint8(),indexFlag:t.skipBytes(7).readUint8()}}function o(){return i.pluck(g.fields,"name")}function s(t){return g.dataOffset+g.recordSize*t}function u(){return m||(m=l())||(m="utf8",MapShaper.stop("Unable to auto-detect the text encoding of the DBF file.\n"+a.ENCODING_PROMPT)),m}function h(){var t=o().map(function(t,e){return JSON.stringify(t)+": arguments["+e+"]"});return new Function("return {"+t.join(",")+"};")}function f(t){var e=t.size()-1;return 26!=t.peek(e)&&e++,e}function c(t){var e=t.map(p),n=f(y),r=h(),i=[];return function(o){for(var a,u,h=s(o),f=0,c=t.length;f<c;f++)u=t[f],a=h+u.columnOffset,a+u.size>n&&MapShaper.stop("[dbf] Invalid DBF file: encountered end-of-file while reading data"),y.position(a),i[f]=e[f](y,u.size);return r.apply(null,i)}}function p(t){var e=t.type,n=null;return"I"==e?n=a.readInt:"F"==e||"N"==e?n=a.getNumberReader():"L"==e?n=a.readBool:"D"==e?n=a.readDate:"C"==e?n=a.getStringReader(u()):(console.log('[dbf] Field "'+field.name+'" has an unsupported type ('+field.type+") -- converting to null values"),n=function(){return null}),n}function l(){var t,e,n=g.ldid,r=a.lookupCodePage(n),i=d(50),o=0===i.length;return r&&87!=n?t=r:o&&(t="ascii"),t||(t=MapShaper.detectEncoding(i)),t&&i.length>0&&(e="Detected DBF text encoding: "+t,t in a.encodingNames&&(e+=" ("+a.encodingNames[t]+")"),message(e),e=MapShaper.decodeSamples(t,i),e=MapShaper.formatStringsAsGrid(e.split("\n")),console.log("Sample text containing non-ascii characters:"+(e.length>60?"\n":"")+e)),t}function d(e){for(var n,r,i,o,u=[],h=g.fields.filter(function(t){return"C"==t.type}),f=new t(256),c={},p=0,l=g.recordCount;p<l;p++)for(var d=0,m=h.length;d<m&&!(u.length>=e);d++)n=h[d],y.position(s(p)+n.columnOffset),(r=a.readStringBytes(y,n.size,f))>0&&a.bufferContainsHighBit(f,r)&&(i=new t(f.slice(0,r)),(o=i.toString("hex"))in c==!1&&(c[o]=!0,u.push(i)));return u}i.isString(e)&&MapShape.stop("[DbfReader] Expected a buffer, not a string");var y=new BinArray(e),g=function(t){t.position(0).littleEndian();var e,n={version:t.readInt8(),updateYear:t.readUint8(),updateMonth:t.readUint8(),updateDay:t.readUint8(),recordCount:t.readUint32(),dataOffset:t.readUint16(),recordSize:t.readUint16(),incompleteTransaction:t.skipBytes(2).readUint8(),encrypted:t.readUint8(),mdx:t.skipBytes(12).readUint8(),ldid:t.readUint8()},o=1;for(t.skipBytes(2),n.fields=[];13!=t.peek()&&10!=t.peek()&&t.position()<n.dataOffset-1;)e=r(t),e.columnOffset=o,n.fields.push(e),o+=e.size;return o!=n.recordSize&&MapShaper.error("Record length mismatch; header:",n.recordSize,"detected:",o),13!=t.peek()&&console.log("[dbf] Found a non-standard header terminator ("+t.peek()+"). DBF file may be corrupted."),MapShaper.getUniqFieldNames(i.pluck(n.fields,"name")).forEach(function(t,e){n.fields[e].name=t}),n}(y),m=n||null;this.size=function(){return g.recordCount},this.readRow=function(t){return c(g.fields)(t)},this.getFields=o,this.getBuffer=function(){return y.buffer()},this.deleteField=function(t){g.fields=g.fields.filter(function(e){return e.name!=t})},this.readRows=function(){for(var t=c(g.fields),e=[],n=0,r=this.size();n<r;n++)e.push(t(n));return e}}function r(t){var e;if(i.isArray(t))e=t;else if(e=[],i.isInteger(t))for(var n=0;n<t;n++)e.push({});else t&&MapShaper.error("[DataTable] Invalid constructor argument:",t);this.exportAsDbf=function(t){return a.exportRecords(e,t)},this.getRecords=function(){return e},this.getRecordAt=function(t){return e[t]}}MapShaper.ShapefileTable=e;var i=MapShaper.utils,o=/^[a-zA-Z_][a-zA-Z_0-9]*$/,s={fieldExists:function(t){return i.contains(this.getFields(),t)},exportAsJSON:function(){return JSON.stringify(this.getRecords())},addField:function(t,e){var n=i.isFunction(e);i.isNumber(e)||i.isString(e)||n||MapShaper.error("DataTable#addField() requires a string, number or function for initialization"),this.fieldExists(t)&&MapShaper.error("DataTable#addField() tried to add a field that already exists:",t),o.test(t)||MapShaper.error("DataTable#addField() invalid field name:",t),this.getRecords().forEach(function(r,i){r[t]=n?e(r,i):e})},addIdField:function(){this.addField("FID",function(t,e){return e})},deleteField:function(t){this.getRecords().forEach(function(e){delete e[t]})},getFields:function(){var t=this.getRecords(),e=t[0];return e?Object.keys(e):[]},update:function(t){for(var e=this.getRecords(),n=0,r=e.length;n<r;n++)e[n]=t(e[n],n)},clone:function(){return new r(this.getRecords().map(function(t){return i.extend({},t)}))},size:function(){return this.getRecords().length}};i.extend(r.prototype,s);var a={};a.languageIds=[1,"437",2,"850",3,"1252",8,"865",9,"437",10,"850",11,"437",13,"437",14,"850",15,"437",16,"850",17,"437",18,"850",19,"932",20,"850",21,"437",22,"850",23,"865",24,"437",25,"437",26,"850",27,"437",28,"863",29,"850",31,"852",34,"852",35,"852",36,"860",37,"850",38,"866",55,"850",64,"852",77,"936",78,"949",79,"950",80,"874",87,"1252",88,"1252",89,"1252",100,"852",101,"866",102,"865",103,"861",106,"737",107,"857",108,"863",120,"950",121,"949",122,"936",123,"932",124,"874",134,"737",135,"852",136,"857",200,"1250",201,"1251",202,"1254",203,"1253",204,"1257"],a.encodingNames={932:"Japanese",936:"Simplified Chinese",950:"Traditional Chinese",1252:"Western European",949:"Korean",874:"Thai",1250:"Eastern European",1251:"Russian",1254:"Turkish",1253:"Greek",1257:"Baltic"},a.ENCODING_PROMPT='To avoid corrupted text, re-import using the "encoding=" option.\nTo see a list of supported encodings, run the "encodings" command.',a.lookupCodePage=function(t){var e=a.languageIds.indexOf(t);return-1==e?null:a.languageIds[e+1]},a.readAsciiString=function(t,e){var n=Env.inNode,r=t.readCString(e,n);return null===r&&stop("DBF file contains non-ascii text.\n"+a.ENCODING_PROMPT),i.trim(r)},a.readStringBytes=function(t,e,n){for(var r,i=0,o=0;o<e&&0!==(r=t.readUint8());o++)(i>0||32!=r)&&(n[i++]=r);for(;i>0&&32==n[i-1];)i--;return i},a.getAsciiStringReader=function(){var t=new Uint8Array(256);return function(e,n){for(var r="",i=a.readStringBytes(e,n,t),o=0;o<i;o++)r+=String.fromCharCode(t[o]);return r}},a.getEncodedStringReader=function(e){var n=new t(256),r="utf8"==MapShaper.standardizeEncodingName(e);return function(t,i){var o=a.readStringBytes(t,i,n);return 0===o?"":r?n.toString("utf8",0,o):MapShaper.decodeString(n.slice(0,o),e)}},a.getStringReader=function(t){return t&&"ascii"!==t?"utf8"===t?a.getEncodedStringReader(t):void MapShaper.error("[Dbf.getStringReader()] Non-ascii encodings only supported in Node."):a.getAsciiStringReader()},a.bufferContainsHighBit=function(t,e){for(var n=0;n<e;n++)if(t[n]>=128)return!0;return!1},a.getNumberReader=function(){var t=a.getAsciiStringReader();return function(e,n){var r,i=t(e,n);return i.indexOf(",")>=0&&(i=i.replace(",",".")),r=parseFloat(i),isNaN(r)?null:r}},a.readInt=function(t,e){return t.readInt32()},a.readBool=function(t,e){var n=t.readCString(e),r=null;return/[ty]/i.test(n)?r=!0:/[fn]/i.test(n)&&(r=!1),r},a.readDate=function(t,e){var n=t.readCString(e),r=n.substr(0,4),i=n.substr(4,2),o=n.substr(6,2);return new Date(Date.UTC(+r,+i-1,+o))}}).call(e,n(1).Buffer)},function(t,e,n){"use strict";(function(t){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=o.prototype):(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return s(this,t,e,n)}function s(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?f(t,e,n):l(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,r){return a(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}function h(t,e){if(a(e),t=i(t,e<0?0:0|d(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(e,n);t=i(t,r);var s=t.write(e,n);return s!==r&&(t=t.slice(0,s)),t}function c(t,e){var n=e.length<0?0:0|d(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),o.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=o.prototype):t=c(t,e),t}function l(t,e){if(o.isBuffer(e)){var n=0|d(e.length);return t=i(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||X(e.length)?i(t,0):c(t,e);if("Buffer"===e.type&&K(e.data))return c(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),o.alloc(+t)}function g(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(t).length;default:if(r)return Z(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return U(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function x(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}var h;if(i){var f=-1;for(h=n;h<a;h++)if(o(t,h)===o(e,-1===f?0:h-f)){if(-1===f&&(f=h),h-f+1===u)return f*s}else-1!==f&&(h-=h-f),f=-1}else for(n+u>a&&(n=a-u),h=n;h>=0;h--){for(var c=!0,p=0;p<u;p++)if(o(t,h+p)!==o(e,p)){c=!1;break}if(c)return h}return-1}function S(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function A(t,e,n,r){return W(Z(e,t.length-n),t,n,r)}function _(t,e,n,r){return W(V(e),t,n,r)}function b(t,e,n,r){return _(t,e,n,r)}function B(t,e,n,r){return W(J(e),t,n,r)}function P(t,e,n,r){return W(G(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,h,f,c;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128==(192&u)&&(c=(31&o)<<6|63&u)>127&&(s=c);break;case 3:u=t[i+1],h=t[i+2],128==(192&u)&&128==(192&h)&&(c=(15&o)<<12|(63&u)<<6|63&h)>2047&&(c<55296||c>57343)&&(s=c);break;case 4:u=t[i+1],h=t[i+2],f=t[i+3],128==(192&u)&&128==(192&h)&&128==(192&f)&&(c=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&f)>65535&&c<1114112&&(s=c)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return I(r)}function I(t){var e=t.length;if(e<=Q)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Q));return n}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function U(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=q(t[o]);return i}function N(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,r,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function k(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(t,e,n,r,i){return i||k(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),H.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,i){return i||k(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),H.write(t,e,n,r,52,8),n+8}function Y(t){if(t=j(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function j(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return t<16?"0"+t.toString(16):t.toString(16)}function Z(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function G(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function J(t){return $.toByteArray(Y(t))}function W(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function X(t){return t!==t}var $=n(3),H=n(4),K=n(5);e.Buffer=o,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return s(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return u(null,t,e,n)},o.allocUnsafe=function(t){return h(null,t)},o.allocUnsafeSlow=function(t){return h(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!K(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?E(this,0,t):m.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var s=i-r,a=n-e,u=Math.min(s,a),h=this.slice(r,i),f=t.slice(e,n),c=0;c<u;++c)if(h[c]!==f[c]){s=h[c],a=f[c];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return x(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return x(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,t,e,n);case"utf8":case"utf-8":return A(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return B(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),H.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),H.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),H.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),H.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){O(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){O(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):F(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);O(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);O(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):F(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):F(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return z(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return z(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,s=r-n;if(this===t&&n<e&&e<r)for(i=s-1;i>=0;--i)t[i+e]=this[i+n];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=o.isBuffer(t)?t:Z(new o(t,r).toString()),u=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4")
;return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-r(t)}function o(t){var e,n,i,o,s,a=t.length;o=r(t),s=new c(3*a/4-o),n=o>0?a-4:a;var u=0;for(e=0;e<n;e+=4)i=f[t.charCodeAt(e)]<<18|f[t.charCodeAt(e+1)]<<12|f[t.charCodeAt(e+2)]<<6|f[t.charCodeAt(e+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===o?(i=f[t.charCodeAt(e)]<<2|f[t.charCodeAt(e+1)]>>4,s[u++]=255&i):1===o&&(i=f[t.charCodeAt(e)]<<10|f[t.charCodeAt(e+1)]<<4|f[t.charCodeAt(e+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s}function s(t){return h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[63&t]}function a(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(s(r));return i.join("")}function u(t){for(var e,n=t.length,r=n%3,i="",o=[],s=0,u=n-r;s<u;s+=16383)o.push(a(t,s,s+16383>u?u:s+16383));return 1===r?(e=t[n-1],i+=h[e>>2],i+=h[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=h[e>>10],i+=h[e>>4&63],i+=h[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=i,e.toByteArray=o,e.fromByteArray=u;for(var h=[],f=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,d=p.length;l<d;++l)h[l]=p[l],f[p.charCodeAt(l)]=l;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,f=-7,c=n?i-1:0,p=n?-1:1,l=t[e+c];for(c+=p,o=l&(1<<-f)-1,l>>=-f,f+=a;f>0;o=256*o+t[e+c],c+=p,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[e+c],c+=p,f-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,r),o-=h}return(l?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,h=8*o-i-1,f=(1<<h)-1,c=f>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+c>=1?p/u:p*Math.pow(2,1-c),e*u>=2&&(s++,u/=2),s+c>=f?(a=0,s=f):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+l]=255&a,l+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[n+l]=255&s,l+=d,s/=256,h-=8);t[n+l-d]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}}]);